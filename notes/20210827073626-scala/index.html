<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Scala | Taking Smart Notes With Org-mode</title>
<meta name="keywords" content="">
<meta name="description" content="
tags: Programming Language

Scala 学习资源

Scala Book

Scala 这么好的语言为什么不流行

HN：Scala 为什么不流行
Reddit：Scala 为什么不流行

结论：Java 人才更多且成本更低。
Scala 工具
sbt
sbt new 无法处理替换过的 SSH 会导致 Auth fail，一个 workaround 就是手动 clone 项目然后：
sbt new file:///path/to/template.g8
sbt 国内加速
~/.sbt/repositories:
[repositories]
local
nexus-aliyun:https://maven.aliyun.com/nexus/content/groups/public
nexus-aliyun-ivy:https://maven.aliyun.com/nexus/content/groups/public/, [organization]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext]
typesafe: https://repo.typesafe.com/typesafe/ivy-releases/, [organization]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext], bootOnly
Unique Scala
Rust from Scala
Rust 和 Scala 有很多想通的地方，Rust 应该从 Scala 借鉴了很多：

可变量和不可变量
模式匹配
Trait

内置类型
val b: Byte = 1
val x: Int = 1
val l: Long = 1
val s: Short = 1
val d: Double = 2.0
val f: Float = 3.0
字符串拼接
Python 也支持类似的 f-string 语法，在 Scala 中是 s-string 语法。">
<meta name="author" content="Gray King">
<link rel="canonical" href="https://notes.0081800.xyz/notes/20210827073626-scala/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.2211ca3164be7830024f6aad2b3a2e520843a64f8f048445c3401c1249aa051d.css" integrity="sha256-IhHKMWS&#43;eDACT2qtKzouUghDpk&#43;PBIRFw0AcEkmqBR0=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://notes.0081800.xyz/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://notes.0081800.xyz/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://notes.0081800.xyz/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://notes.0081800.xyz/apple-touch-icon.png">
<link rel="mask-icon" href="https://notes.0081800.xyz/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://notes.0081800.xyz/notes/20210827073626-scala/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://notes.0081800.xyz/notes/20210827073626-scala/">
  <meta property="og:site_name" content="Taking Smart Notes With Org-mode">
  <meta property="og:title" content="Scala">
  <meta property="og:description" content=" tags: Programming Language Scala 学习资源 Scala Book Scala 这么好的语言为什么不流行 HN：Scala 为什么不流行 Reddit：Scala 为什么不流行 结论：Java 人才更多且成本更低。
Scala 工具 sbt sbt new 无法处理替换过的 SSH 会导致 Auth fail，一个 workaround 就是手动 clone 项目然后：
sbt new file:///path/to/template.g8 sbt 国内加速 ~/.sbt/repositories:
[repositories] local nexus-aliyun:https://maven.aliyun.com/nexus/content/groups/public nexus-aliyun-ivy:https://maven.aliyun.com/nexus/content/groups/public/, [organization]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext] typesafe: https://repo.typesafe.com/typesafe/ivy-releases/, [organization]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext], bootOnly Unique Scala Rust from Scala Rust 和 Scala 有很多想通的地方，Rust 应该从 Scala 借鉴了很多：
可变量和不可变量 模式匹配 Trait 内置类型 val b: Byte = 1 val x: Int = 1 val l: Long = 1 val s: Short = 1 val d: Double = 2.0 val f: Float = 3.0 字符串拼接 Python 也支持类似的 f-string 语法，在 Scala 中是 s-string 语法。">
  <meta property="og:locale" content="zh-cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="notes">
    <meta property="article:published_time" content="2021-08-27T07:36:00+08:00">
    <meta property="article:modified_time" content="2021-08-27T07:36:00+08:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Scala">
<meta name="twitter:description" content="
tags: Programming Language

Scala 学习资源

Scala Book

Scala 这么好的语言为什么不流行

HN：Scala 为什么不流行
Reddit：Scala 为什么不流行

结论：Java 人才更多且成本更低。
Scala 工具
sbt
sbt new 无法处理替换过的 SSH 会导致 Auth fail，一个 workaround 就是手动 clone 项目然后：
sbt new file:///path/to/template.g8
sbt 国内加速
~/.sbt/repositories:
[repositories]
local
nexus-aliyun:https://maven.aliyun.com/nexus/content/groups/public
nexus-aliyun-ivy:https://maven.aliyun.com/nexus/content/groups/public/, [organization]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext]
typesafe: https://repo.typesafe.com/typesafe/ivy-releases/, [organization]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext], bootOnly
Unique Scala
Rust from Scala
Rust 和 Scala 有很多想通的地方，Rust 应该从 Scala 借鉴了很多：

可变量和不可变量
模式匹配
Trait

内置类型
val b: Byte = 1
val x: Int = 1
val l: Long = 1
val s: Short = 1
val d: Double = 2.0
val f: Float = 3.0
字符串拼接
Python 也支持类似的 f-string 语法，在 Scala 中是 s-string 语法。">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Notes",
      "item": "https://notes.0081800.xyz/notes/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Scala",
      "item": "https://notes.0081800.xyz/notes/20210827073626-scala/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Scala",
  "name": "Scala",
  "description": " tags: Programming Language Scala 学习资源 Scala Book Scala 这么好的语言为什么不流行 HN：Scala 为什么不流行 Reddit：Scala 为什么不流行 结论：Java 人才更多且成本更低。\nScala 工具 sbt sbt new 无法处理替换过的 SSH 会导致 Auth fail，一个 workaround 就是手动 clone 项目然后：\nsbt new file:///path/to/template.g8 sbt 国内加速 ~/.sbt/repositories:\n[repositories] local nexus-aliyun:https://maven.aliyun.com/nexus/content/groups/public nexus-aliyun-ivy:https://maven.aliyun.com/nexus/content/groups/public/, [organization]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext] typesafe: https://repo.typesafe.com/typesafe/ivy-releases/, [organization]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext], bootOnly Unique Scala Rust from Scala Rust 和 Scala 有很多想通的地方，Rust 应该从 Scala 借鉴了很多：\n可变量和不可变量 模式匹配 Trait 内置类型 val b: Byte = 1 val x: Int = 1 val l: Long = 1 val s: Short = 1 val d: Double = 2.0 val f: Float = 3.0 字符串拼接 Python 也支持类似的 f-string 语法，在 Scala 中是 s-string 语法。\n",
  "keywords": [
    
  ],
  "articleBody": " tags: Programming Language Scala 学习资源 Scala Book Scala 这么好的语言为什么不流行 HN：Scala 为什么不流行 Reddit：Scala 为什么不流行 结论：Java 人才更多且成本更低。\nScala 工具 sbt sbt new 无法处理替换过的 SSH 会导致 Auth fail，一个 workaround 就是手动 clone 项目然后：\nsbt new file:///path/to/template.g8 sbt 国内加速 ~/.sbt/repositories:\n[repositories] local nexus-aliyun:https://maven.aliyun.com/nexus/content/groups/public nexus-aliyun-ivy:https://maven.aliyun.com/nexus/content/groups/public/, [organization]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext] typesafe: https://repo.typesafe.com/typesafe/ivy-releases/, [organization]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext], bootOnly Unique Scala Rust from Scala Rust 和 Scala 有很多想通的地方，Rust 应该从 Scala 借鉴了很多：\n可变量和不可变量 模式匹配 Trait 内置类型 val b: Byte = 1 val x: Int = 1 val l: Long = 1 val s: Short = 1 val d: Double = 2.0 val f: Float = 3.0 字符串拼接 Python 也支持类似的 f-string 语法，在 Scala 中是 s-string 语法。\nval firstName = \"John\" val mi = 'C' val lastName = \"Doe\" val name = firstName + \" \" + mi + \" \" + lastName val name = s\"$firstName $mi $lastName\" println(s\"Name: $firstName $mi $lastName\") println(s\"Name: ${firstName} ${mi} ${lastName}\") println(s\"1+1 = ${1+1}\") 多行字符串 Multiline strings\nfor 循环 val nums = Seq(1,2,3) for (n \u003c- nums) println(n) val people = List( \"Bill\", \"Candy\", \"Karen\", \"Leo\", \"Regina\" ) for (p \u003c- people) println(p) // foreach people.foreach(println) // map foreach val ratings = Map( \"Lady in the Water\" -\u003e 3.0, \"Snakes on a Plane\" -\u003e 4.0, \"You, Me and Dupree\" -\u003e 3.5 ) for ((name,rating) \u003c- ratings) println(s\"Movie: $name, Rating: $rating\") ratings.foreach { case(movie, rating) =\u003e println(s\"key: $movie, value: $rating\") } for 表达式 val nums = Seq(1,2,3) val doubledNums = for (n \u003c- nums) yield n * 2 // \u003c----- 注意 yield see also: yield\n模式匹配 Rust 和 Scala 很像，但是 Scala 依然有很多独特的地方：\n// 模式匹配作为方法体 def convertBooleanToStringMessage(bool: Boolean): String = bool match { case true =\u003e \"you said true\" case false =\u003e \"you said false\" } // alternate cases def isTrue(a: Any) = a match { case 0 | \"\" =\u003e false case _ =\u003e true } // 支持 if count match { case 1 =\u003e println(\"one, a lonely number\") case x if x == 2 || x == 3 =\u003e println(\"two's company, three's a crowd\") case x if x \u003e 3 =\u003e println(\"4+, that's a party\") case _ =\u003e println(\"i'm guessing your number is zero or less\") } 异常捕获 异常捕获结合了模式匹配：\nvar text = \"\" try { text = openAndReadAFile(filename) } catch { case e: FileNotFoundException =\u003e println(\"Couldn't find that file.\") case e: IOException =\u003e println(\"Had an IOException trying to read that file\") } 方法定义 // 函数定义的基本语法 def sum(a: Int, b: Int): Int = a + b def concatenate(s1: String, s2: String): String = s1 + s2 // 返回参数可以省略 def sum(a: Int, b: Int) = a + b def concatenate(s1: String, s2: String) = s1 + s2 // 代码块用 {} 包围，但是 = 不能省略 def long(a: Int, b: Int) = { a + b } 类构造 class Person(var firstName: String, var lastName: String) val p = new Person(\"Bill\", \"Panner\") // val 只读 class Person(val firstName: String, val lastName: String) // 构造方法直接写在类体里 class Person(var firstName: String, var lastName: String) { println(\"the constructor begins\") // 'public' access by default var age = 0 // some class fields private val HOME = System.getProperty(\"user.home\") // some methods override def toString(): String = s\"$firstName $lastName is $age years old\" def printHome(): Unit = println(s\"HOME = $HOME\") def printFullName(): Unit = println(this) printHome() printFullName() println(\"you've reached the end of the constructor\") } // 其他一些例子 class Pizza (var crustSize: Int, var crustType: String) // a stock, like AAPL or GOOG class Stock(var symbol: String, var price: BigDecimal) // a network socket class Socket(val timeout: Int, val linger: Int) { override def toString = s\"timeout: $timeout, linger: $linger\" } class Address ( var street1: String, var street2: String, var city: String, var state: String ) 构造方法重载 val DefaultCrustSize = 12 val DefaultCrustType = \"THIN\" // the primary constructor class Pizza (var crustSize: Int, var crustType: String) { // one-arg auxiliary constructor def this(crustSize: Int) = { this(crustSize, DefaultCrustType) } // one-arg auxiliary constructor def this(crustType: String) = { this(DefaultCrustSize, crustType) } // zero-arg auxiliary constructor def this() = { this(DefaultCrustSize, DefaultCrustType) } override def toString = s\"A $crustSize inch pizza with a $crustType crust\" } ",
  "wordCount" : "662",
  "inLanguage": "en",
  "datePublished": "2021-08-27T07:36:00+08:00",
  "dateModified": "2021-08-27T07:36:00+08:00",
  "author":[{
    "@type": "Person",
    "name": "Gray King"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://notes.0081800.xyz/notes/20210827073626-scala/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Taking Smart Notes With Org-mode",
    "logo": {
      "@type": "ImageObject",
      "url": "https://notes.0081800.xyz/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://notes.0081800.xyz/" accesskey="h" title="Taking Smart Notes With Org-mode (Alt + H)">Taking Smart Notes With Org-mode</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://notes.0081800.xyz/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://notes.0081800.xyz/articles/" title="Articles">
                    <span>Articles</span>
                </a>
            </li>
            <li>
                <a href="https://notes.0081800.xyz/notes/" title="Notes">
                    <span>Notes</span>
                </a>
            </li>
            <li>
                <a href="https://notes.0081800.xyz/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://notes.0081800.xyz/">Home</a>&nbsp;»&nbsp;<a href="https://notes.0081800.xyz/notes/">Notes</a></div>
    <h1 class="post-title entry-hint-parent">
      Scala
    </h1>
    <div class="post-meta"><span title='2021-08-27 07:36:00 +0800 +0800'>August 27, 2021</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Gray King

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#scala-%e5%ad%a6%e4%b9%a0%e8%b5%84%e6%ba%90" aria-label="Scala 学习资源">Scala 学习资源</a></li>
                <li>
                    <a href="#scala-%e8%bf%99%e4%b9%88%e5%a5%bd%e7%9a%84%e8%af%ad%e8%a8%80%e4%b8%ba%e4%bb%80%e4%b9%88%e4%b8%8d%e6%b5%81%e8%a1%8c" aria-label="Scala 这么好的语言为什么不流行">Scala 这么好的语言为什么不流行</a></li>
                <li>
                    <a href="#scala-%e5%b7%a5%e5%85%b7" aria-label="Scala 工具">Scala 工具</a><ul>
                        
                <li>
                    <a href="#sbt" aria-label="sbt">sbt</a></li>
                <li>
                    <a href="#sbt-%e5%9b%bd%e5%86%85%e5%8a%a0%e9%80%9f" aria-label="sbt 国内加速">sbt 国内加速</a></li></ul>
                </li>
                <li>
                    <a href="#unique-scala" aria-label="Unique Scala">Unique Scala</a><ul>
                        
                <li>
                    <a href="#rust-from-scala" aria-label="Rust from Scala">Rust from Scala</a></li>
                <li>
                    <a href="#%e5%86%85%e7%bd%ae%e7%b1%bb%e5%9e%8b" aria-label="内置类型">内置类型</a></li>
                <li>
                    <a href="#%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%8b%bc%e6%8e%a5" aria-label="字符串拼接">字符串拼接</a></li>
                <li>
                    <a href="#%e5%a4%9a%e8%a1%8c%e5%ad%97%e7%ac%a6%e4%b8%b2" aria-label="多行字符串">多行字符串</a></li>
                <li>
                    <a href="#for-%e5%be%aa%e7%8e%af" aria-label="for 循环">for 循环</a></li>
                <li>
                    <a href="#for-%e8%a1%a8%e8%be%be%e5%bc%8f" aria-label="for 表达式">for 表达式</a></li>
                <li>
                    <a href="#%e6%a8%a1%e5%bc%8f%e5%8c%b9%e9%85%8d" aria-label="模式匹配">模式匹配</a></li>
                <li>
                    <a href="#%e5%bc%82%e5%b8%b8%e6%8d%95%e8%8e%b7" aria-label="异常捕获">异常捕获</a></li>
                <li>
                    <a href="#%e6%96%b9%e6%b3%95%e5%ae%9a%e4%b9%89" aria-label="方法定义">方法定义</a></li>
                <li>
                    <a href="#%e7%b1%bb%e6%9e%84%e9%80%a0" aria-label="类构造">类构造</a></li>
                <li>
                    <a href="#%e6%9e%84%e9%80%a0%e6%96%b9%e6%b3%95%e9%87%8d%e8%bd%bd" aria-label="构造方法重载">构造方法重载</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><ul>
<li>tags: <a href="/topics/20200320170914_programming_language/">Programming Language</a></li>
</ul>
<h2 id="scala-学习资源">Scala 学习资源<a hidden class="anchor" aria-hidden="true" href="#scala-学习资源">#</a></h2>
<ul>
<li><a href="https://docs.scala-lang.org/overviews/scala-book/introduction.html">Scala Book</a></li>
</ul>
<h2 id="scala-这么好的语言为什么不流行">Scala 这么好的语言为什么不流行<a hidden class="anchor" aria-hidden="true" href="#scala-这么好的语言为什么不流行">#</a></h2>
<ul>
<li><a href="https://news.ycombinator.com/item?id=20154012">HN：Scala 为什么不流行</a></li>
<li><a href="https://www.reddit.com/r/scala/comments/l4pggx/why%5Fdo%5Fyou%5Fthink%5Fscala%5Fisnt%5Fmore%5Fpopular/">Reddit：Scala 为什么不流行</a></li>
</ul>
<p>结论：Java 人才更多且成本更低。</p>
<h2 id="scala-工具">Scala 工具<a hidden class="anchor" aria-hidden="true" href="#scala-工具">#</a></h2>
<h3 id="sbt">sbt<a hidden class="anchor" aria-hidden="true" href="#sbt">#</a></h3>
<p><code>sbt new</code> 无法处理替换过的 SSH 会导致 Auth fail，一个 workaround 就是手动 clone 项目然后：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sbt new file:///path/to/template.g8
</span></span></code></pre></div><h3 id="sbt-国内加速">sbt 国内加速<a hidden class="anchor" aria-hidden="true" href="#sbt-国内加速">#</a></h3>
<p><code>~/.sbt/repositories</code>:</p>
<pre tabindex="0"><code class="language-nil" data-lang="nil">[repositories]
local
nexus-aliyun:https://maven.aliyun.com/nexus/content/groups/public
nexus-aliyun-ivy:https://maven.aliyun.com/nexus/content/groups/public/, [organization]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext]
typesafe: https://repo.typesafe.com/typesafe/ivy-releases/, [organization]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext], bootOnly
</code></pre><h2 id="unique-scala">Unique Scala<a hidden class="anchor" aria-hidden="true" href="#unique-scala">#</a></h2>
<h3 id="rust-from-scala">Rust from Scala<a hidden class="anchor" aria-hidden="true" href="#rust-from-scala">#</a></h3>
<p>Rust 和 Scala 有很多想通的地方，Rust 应该从 Scala 借鉴了很多：</p>
<ul>
<li>可变量和不可变量</li>
<li>模式匹配</li>
<li>Trait</li>
</ul>
<h3 id="内置类型">内置类型<a hidden class="anchor" aria-hidden="true" href="#内置类型">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> b<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Byte</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> l<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Long</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> s<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Short</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> d<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Double</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2.0</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> f<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Float</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3.0</span>
</span></span></code></pre></div><h3 id="字符串拼接">字符串拼接<a hidden class="anchor" aria-hidden="true" href="#字符串拼接">#</a></h3>
<p>Python 也支持类似的 <code>f-string</code> 语法，在 Scala 中是 <code>s-string</code> 语法。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> firstName <span style="color:#66d9ef">=</span> <span style="color:#e6db74">&#34;John&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> mi <span style="color:#66d9ef">=</span> <span style="color:#e6db74">&#39;C&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> lastName <span style="color:#66d9ef">=</span> <span style="color:#e6db74">&#34;Doe&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> name <span style="color:#66d9ef">=</span> firstName <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> mi <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> lastName
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> name <span style="color:#66d9ef">=</span> <span style="color:#e6db74">s&#34;</span><span style="color:#e6db74">$firstName</span><span style="color:#e6db74"> </span><span style="color:#e6db74">$mi</span><span style="color:#e6db74"> </span><span style="color:#e6db74">$lastName</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>println<span style="color:#f92672">(</span><span style="color:#e6db74">s&#34;Name: </span><span style="color:#e6db74">$firstName</span><span style="color:#e6db74"> </span><span style="color:#e6db74">$mi</span><span style="color:#e6db74"> </span><span style="color:#e6db74">$lastName</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>println<span style="color:#f92672">(</span><span style="color:#e6db74">s&#34;Name: </span><span style="color:#e6db74">${</span>firstName<span style="color:#e6db74">}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">${</span>mi<span style="color:#e6db74">}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">${</span>lastName<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>println<span style="color:#f92672">(</span><span style="color:#e6db74">s&#34;1+1 = </span><span style="color:#e6db74">${</span><span style="color:#ae81ff">1</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">)</span>
</span></span></code></pre></div><h3 id="多行字符串">多行字符串<a hidden class="anchor" aria-hidden="true" href="#多行字符串">#</a></h3>
<p><a href="https://docs.scala-lang.org/overviews/scala-book/two-notes-about-strings.html#multiline-strings">Multiline strings</a></p>
<h3 id="for-循环">for 循环<a hidden class="anchor" aria-hidden="true" href="#for-循环">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> nums <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Seq</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1</span><span style="color:#f92672">,</span><span style="color:#ae81ff">2</span><span style="color:#f92672">,</span><span style="color:#ae81ff">3</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>n <span style="color:#66d9ef">&lt;-</span> nums<span style="color:#f92672">)</span> println<span style="color:#f92672">(</span>n<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> people <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">List</span><span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;Bill&#34;</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;Candy&#34;</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;Karen&#34;</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;Leo&#34;</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;Regina&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>p <span style="color:#66d9ef">&lt;-</span> people<span style="color:#f92672">)</span> println<span style="color:#f92672">(</span>p<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// foreach
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>people<span style="color:#f92672">.</span>foreach<span style="color:#f92672">(</span>println<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// map foreach
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> ratings <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Map</span><span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;Lady in the Water&#34;</span>  <span style="color:#f92672">-&gt;</span> <span style="color:#ae81ff">3.0</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;Snakes on a Plane&#34;</span>  <span style="color:#f92672">-&gt;</span> <span style="color:#ae81ff">4.0</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;You, Me and Dupree&#34;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#ae81ff">3.5</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> <span style="color:#f92672">((</span>name<span style="color:#f92672">,</span>rating<span style="color:#f92672">)</span> <span style="color:#66d9ef">&lt;-</span> ratings<span style="color:#f92672">)</span> println<span style="color:#f92672">(</span><span style="color:#e6db74">s&#34;Movie: </span><span style="color:#e6db74">$name</span><span style="color:#e6db74">, Rating: </span><span style="color:#e6db74">$rating</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ratings<span style="color:#f92672">.</span>foreach <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span><span style="color:#f92672">(</span>movie<span style="color:#f92672">,</span> rating<span style="color:#f92672">)</span> <span style="color:#66d9ef">=&gt;</span> println<span style="color:#f92672">(</span><span style="color:#e6db74">s&#34;key: </span><span style="color:#e6db74">$movie</span><span style="color:#e6db74">, value: </span><span style="color:#e6db74">$rating</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="for-表达式">for 表达式<a hidden class="anchor" aria-hidden="true" href="#for-表达式">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> nums <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Seq</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1</span><span style="color:#f92672">,</span><span style="color:#ae81ff">2</span><span style="color:#f92672">,</span><span style="color:#ae81ff">3</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> doubledNums <span style="color:#66d9ef">=</span> <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>n <span style="color:#66d9ef">&lt;-</span> nums<span style="color:#f92672">)</span> <span style="color:#66d9ef">yield</span> n <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#75715e">// &lt;----- 注意 yield
</span></span></span></code></pre></div><p>see also: <a href="https://docs.scala-lang.org/overviews/scala-book/for-expressions.html#the-yield-keyword">yield</a></p>
<h3 id="模式匹配">模式匹配<a hidden class="anchor" aria-hidden="true" href="#模式匹配">#</a></h3>
<p>Rust 和 Scala 很像，但是 Scala 依然有很多独特的地方：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#75715e">// 模式匹配作为方法体
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">def</span> convertBooleanToStringMessage<span style="color:#f92672">(</span>bool<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Boolean</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span> <span style="color:#f92672">=</span> bool <span style="color:#66d9ef">match</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">true</span> <span style="color:#66d9ef">=&gt;</span> <span style="color:#e6db74">&#34;you said true&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">false</span> <span style="color:#66d9ef">=&gt;</span> <span style="color:#e6db74">&#34;you said false&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// alternate cases
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">def</span> isTrue<span style="color:#f92672">(</span>a<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Any</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> a <span style="color:#66d9ef">match</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#66d9ef">=&gt;</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">_</span> <span style="color:#66d9ef">=&gt;</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 支持 if
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>count <span style="color:#66d9ef">match</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">=&gt;</span> println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;one, a lonely number&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> x <span style="color:#66d9ef">if</span> x <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">||</span> x <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span> <span style="color:#66d9ef">=&gt;</span> println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;two&#39;s company, three&#39;s a crowd&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> x <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">3</span> <span style="color:#66d9ef">=&gt;</span> println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;4+, that&#39;s a party&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">_</span> <span style="color:#66d9ef">=&gt;</span> println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;i&#39;m guessing your number is zero or less&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="异常捕获">异常捕获<a hidden class="anchor" aria-hidden="true" href="#异常捕获">#</a></h3>
<p>异常捕获结合了模式匹配：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> text <span style="color:#66d9ef">=</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>	text <span style="color:#66d9ef">=</span> openAndReadAFile<span style="color:#f92672">(</span>filename<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> e<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">FileNotFoundException</span> <span style="color:#f92672">=&gt;</span> println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Couldn&#39;t find that file.&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> e<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">IOException</span> <span style="color:#f92672">=&gt;</span> println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Had an IOException trying to read that file&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="方法定义">方法定义<a hidden class="anchor" aria-hidden="true" href="#方法定义">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#75715e">// 函数定义的基本语法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">def</span> sum<span style="color:#f92672">(</span>a<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">,</span> b<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span> <span style="color:#f92672">=</span> a <span style="color:#f92672">+</span> b
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> concatenate<span style="color:#f92672">(</span>s1<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">,</span> s2<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span> <span style="color:#f92672">=</span> s1 <span style="color:#f92672">+</span> s2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 返回参数可以省略
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">def</span> sum<span style="color:#f92672">(</span>a<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">,</span> b<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> a <span style="color:#f92672">+</span> b
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> concatenate<span style="color:#f92672">(</span>s1<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">,</span> s2<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> s1 <span style="color:#f92672">+</span> s2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 代码块用 {} 包围，但是 = 不能省略
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">def</span> long<span style="color:#f92672">(</span>a<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">,</span> b<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  a <span style="color:#f92672">+</span> b
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="类构造">类构造<a hidden class="anchor" aria-hidden="true" href="#类构造">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span><span style="color:#f92672">(</span><span style="color:#66d9ef">var</span> firstName<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">var</span> lastName<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> p <span style="color:#66d9ef">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Person</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Bill&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Panner&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// val 只读
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span><span style="color:#f92672">(</span><span style="color:#66d9ef">val</span> firstName<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">val</span> lastName<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 构造方法直接写在类体里
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span><span style="color:#f92672">(</span><span style="color:#66d9ef">var</span> firstName<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">var</span> lastName<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;the constructor begins&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// &#39;public&#39; access by default
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> age <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// some class fields
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> <span style="color:#a6e22e">HOME</span> <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">System</span><span style="color:#f92672">.</span>getProperty<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;user.home&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// some methods
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">override</span> <span style="color:#66d9ef">def</span> toString<span style="color:#f92672">()</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">s&#34;</span><span style="color:#e6db74">$firstName</span><span style="color:#e6db74"> </span><span style="color:#e6db74">$lastName</span><span style="color:#e6db74"> is </span><span style="color:#e6db74">$age</span><span style="color:#e6db74"> years old&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> printHome<span style="color:#f92672">()</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Unit</span> <span style="color:#f92672">=</span> println<span style="color:#f92672">(</span><span style="color:#e6db74">s&#34;HOME = </span><span style="color:#e6db74">$HOME</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> printFullName<span style="color:#f92672">()</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Unit</span> <span style="color:#f92672">=</span> println<span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	printHome<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>	printFullName<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>	println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;you&#39;ve reached the end of the constructor&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 其他一些例子
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Pizza</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">var</span> crustSize<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">var</span> crustType<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// a stock, like AAPL or GOOG
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Stock</span><span style="color:#f92672">(</span><span style="color:#66d9ef">var</span> symbol<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">var</span> price<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">BigDecimal</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// a network socket
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Socket</span><span style="color:#f92672">(</span><span style="color:#66d9ef">val</span> timeout<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">val</span> linger<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">override</span> <span style="color:#66d9ef">def</span> toString <span style="color:#66d9ef">=</span> <span style="color:#e6db74">s&#34;timeout: </span><span style="color:#e6db74">$timeout</span><span style="color:#e6db74">, linger: </span><span style="color:#e6db74">$linger</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Address</span> <span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">var</span> street1<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">var</span> street2<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">var</span> city<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">var</span> state<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">)</span>
</span></span></code></pre></div><h3 id="构造方法重载">构造方法重载<a hidden class="anchor" aria-hidden="true" href="#构造方法重载">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> <span style="color:#a6e22e">DefaultCrustSize</span> <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">12</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> <span style="color:#a6e22e">DefaultCrustType</span> <span style="color:#66d9ef">=</span> <span style="color:#e6db74">&#34;THIN&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// the primary constructor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Pizza</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">var</span> crustSize<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">var</span> crustType<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// one-arg auxiliary constructor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">(</span>crustSize<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">this</span><span style="color:#f92672">(</span>crustSize<span style="color:#f92672">,</span> <span style="color:#a6e22e">DefaultCrustType</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// one-arg auxiliary constructor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">(</span>crustType<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">this</span><span style="color:#f92672">(</span><span style="color:#a6e22e">DefaultCrustSize</span><span style="color:#f92672">,</span> crustType<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// zero-arg auxiliary constructor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">this</span><span style="color:#f92672">(</span><span style="color:#a6e22e">DefaultCrustSize</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">DefaultCrustType</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">override</span> <span style="color:#66d9ef">def</span> toString <span style="color:#66d9ef">=</span> <span style="color:#e6db74">s&#34;A </span><span style="color:#e6db74">$crustSize</span><span style="color:#e6db74"> inch pizza with a </span><span style="color:#e6db74">$crustType</span><span style="color:#e6db74"> crust&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>


   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   


<hr />

  <div class="bl-section">
    <h3>Links to this note</h3>
    <br />
    <div class="backlinks">
      <ul>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Spark
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Bigdata Spark 编程语言选择 毋庸置疑，Python 应该是最简单也是大部分的选择，但是如果有依赖那么将要付出额外的心智负担（Spark 管理 Python 依赖）。 JVM 语言的依赖组织方式则具有天然的优势，可以将依赖（排除 Spark 生态之后）都 bundle 进 Jar 包里。 其中 Scala 兼具简单和 JVM 的优势，但是它「不流行」。
Spark Driver &amp; Executor Driver 执行 spark-commit 客户端，创建 SparkContext 执行 main 函数。 Executor Spark Worker 上的线程 See also:
Understanding the working of Spark Driver and Executor Cluster Mode Overview Spark 代码执行 我在配置 Spark 的时候就在好奇，从观察上看部分代码应该是执行在 Driver 上部分代码会执行在 Executer，这让我很好奇。 但是我通过学习 Spark RDD 学习到了一些知识。
以下代码是在 Executor 上执行的：
Transformations 和 Actions 是执行在 Spark 集群的。 传递给 Transformations 和 Actions 的闭包函数也是执行在 Spark 集群上的。 其他额外的代码都是执行在 Driver 上的，所以想要在 Driver 打印日志需要上使用 collect：
...</p>
            </div>
            <footer class="entry-footer"><span title='2021-08-27 08:05:00 +0800 +0800'>August 27, 2021</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Spark" href="https://notes.0081800.xyz/notes/20210827080540-spark/"></a>
          </article>
       
     </ul>
    </div>
  </div>


</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://notes.0081800.xyz/">Taking Smart Notes With Org-mode</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
