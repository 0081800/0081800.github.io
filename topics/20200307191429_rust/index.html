<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Rust | Taking Smart Notes With Org-mode</title>
<meta name="keywords" content="rust">
<meta name="description" content=" tags: Programming Language ">
<meta name="author" content="Gray King">
<link rel="canonical" href="https://notes.0081800.xyz/topics/20200307191429_rust/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css" integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U&#43;6hYRq/Ez/nm5vg=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://notes.0081800.xyz/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://notes.0081800.xyz/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://notes.0081800.xyz/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://notes.0081800.xyz/apple-touch-icon.png">
<link rel="mask-icon" href="https://notes.0081800.xyz/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://notes.0081800.xyz/topics/20200307191429_rust/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  

<meta property="og:title" content="Rust" />
<meta property="og:description" content=" tags: Programming Language " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://notes.0081800.xyz/topics/20200307191429_rust/" /><meta property="article:section" content="topics" />
<meta property="article:published_time" content="2020-03-07T00:00:00+08:00" />
<meta property="article:modified_time" content="2020-03-07T00:00:00+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Rust"/>
<meta name="twitter:description" content=" tags: Programming Language "/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Topics",
      "item": "https://notes.0081800.xyz/topics/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Rust",
      "item": "https://notes.0081800.xyz/topics/20200307191429_rust/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Rust",
  "name": "Rust",
  "description": " tags: Programming Language ",
  "keywords": [
    "rust"
  ],
  "articleBody": " tags: Programming Language ",
  "wordCount" : "3",
  "inLanguage": "en",
  "datePublished": "2020-03-07T00:00:00+08:00",
  "dateModified": "2020-03-07T00:00:00+08:00",
  "author":[{
    "@type": "Person",
    "name": "Gray King"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://notes.0081800.xyz/topics/20200307191429_rust/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Taking Smart Notes With Org-mode",
    "logo": {
      "@type": "ImageObject",
      "url": "https://notes.0081800.xyz/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://notes.0081800.xyz/" accesskey="h" title="Taking Smart Notes With Org-mode (Alt + H)">Taking Smart Notes With Org-mode</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://notes.0081800.xyz/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://notes.0081800.xyz/articles/" title="Articles">
                    <span>Articles</span>
                </a>
            </li>
            <li>
                <a href="https://notes.0081800.xyz/notes/" title="Notes">
                    <span>Notes</span>
                </a>
            </li>
            <li>
                <a href="https://notes.0081800.xyz/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://notes.0081800.xyz/">Home</a>&nbsp;»&nbsp;<a href="https://notes.0081800.xyz/topics/">Topics</a></div>
    <h1 class="post-title">
      Rust
    </h1>
    <div class="post-meta"><span title='2020-03-07 00:00:00 +0800 +0800'>March 7, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King

</div>
  </header> 

  <div class="post-content"><ul>
<li>tags: <a href="/topics/20200320170914_programming_language/">Programming Language</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://notes.0081800.xyz/tags/rust/">Rust</a></li>
    </ul>
  </footer>


   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   
      
   

   
      
   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   
      
   

   
      
   

   
      
   

   
      
   

   
      
   

   
      
   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   
      
   

   
      
   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   
      
   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   
      
   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   


<hr />

  <div class="bl-section">
    <h3>Links to this note</h3>
    <br />
    <div class="backlinks">
      <ul>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Rust std::borrow::Cow
              </h2>
            </header>
            <div class="entry-content">
              <p>ref: Rust, Rust Borrow and Lifetimes 发现一个 Cow 用处，可以让变量支持同时赋值引用类型和值类型，场景就是我们可能接收到一个引用，同时可能需要把它变成值类型做一些处理，我们可以通过 clone 或 to_owned 统一变成值类型：
fn maybe_need_to_change(s: &amp;str) { let s = if s.starts_with(&#34;xxx&#34;) { manipulate(s) } else { s.to_owned() // 存在额外的开销 }; take_reference(&amp;s); // s.into_owned() 可以得到 String 类型的值 } fn manipulate(s: &amp;str) -&gt; String { s.to_owned() } fn take_reference(s: &amp;str) { } 另外一种方式就是通过 Cow 避免不必要的 clone 开销：
fn maybe_need_to_change(s: &amp;str) { let s = if s.starts_with(&#34;xxx&#34;) { Cow::from(manipulate(s)) } else { Cow::from(s) // 没有额外的开销 }; take_reference(&amp;s); } fn manipulate(s: &amp;str) -&gt; String { s....</p>
            </div>
            <footer class="entry-footer"><span title='2024-05-06 11:51:00 +0800 +0800'>May 6, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Rust std::borrow::Cow" href="https://notes.0081800.xyz/notes/20240506115111-rust_std_borrow_cow/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Rust Opaque Types: Static Dispatch vs. Dynamic Dispatch
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust source: Johnston, Dylan R. “Formally Verifying Rust’s Opaque Types,” August 1, 2022. https://dylanj.xyz/posts/rust-coq-opaque-types/. Prelude trait ToString { fn to_string(&amp;self) -&gt; String; } Static Dispatch fn yell&lt;S: ToString&gt;(stringable: S) { println!(stringable.to_string().to_uppercase()) } Dynamic Dispatch fn yell(stringable: &amp;dyn ToString) { println!(stringable.to_string().to_uppercase()) } impl Trait fn yell(stringable: impl ToString) { println!(stringable.to_string().to_uppercase()) } </p>
            </div>
            <footer class="entry-footer"><span title='2022-08-02 10:41:00 +0800 +0800'>August 2, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Rust Opaque Types: Static Dispatch vs. Dynamic Dispatch" href="https://notes.0081800.xyz/notes/20220802104148-rust_opaque_types_static_dispatch_vs_dynamic_dispatch/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Flutter FFI didn&#39;t be Invoked in Release Mode
              </h2>
            </header>
            <div class="entry-content">
              <p>tags: Rust,Flutter,iOS source: “Using Dummy Headers - Flutter_rust_bridge.” Accessed July 25, 2022. http://cjycode.com/flutter_rust_bridge/integrate/ios_headers.html. Recently, I met a problem that the iOS app didn’t work properly in release mode. After a little searching, I found it’s a Flutter app and invoked a Rust function by FFI. The inital call were not invoked during app startup, and it should be.
I finally resolved the problem by following:
https://github.com/fzyzcjy/flutter_rust_bridge/issues/496 http://cjycode.com/flutter_rust_bridge/integrate/ios_headers.html In short:...</p>
            </div>
            <footer class="entry-footer"><span title='2022-07-25 08:13:00 +0800 +0800'>July 25, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Flutter FFI didn&#39;t be Invoked in Release Mode" href="https://notes.0081800.xyz/notes/20220725081335-flutter_ffi_won_t_be_invoked_in_release_mode/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>GitHub: linebender/druid – A data-first Rust-native UI design toolkit.
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust,Rust GUI Overview Platform Documentation Community Activity Most Activity Period Native UI Cross platform Leak 5.7k stars Yes 2019-2021 No Conclusion Use the the platform-native widgets or mimic them. (Relm, SixtyFPS) Embed easily into custom render pipelines. (Conrod) Adhere to a specific architectural style such as Elm. (Iced, Relm) Support rendering to HTML when targeting the web. (Iced, Moxie) </p>
            </div>
            <footer class="entry-footer"><span title='2022-02-08 13:32:00 +0800 +0800'>February 8, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to GitHub: linebender/druid – A data-first Rust-native UI design toolkit." href="https://notes.0081800.xyz/notes/20220208133213-github_linebender_druid_a_data_first_rust_native_ui_design_toolkit/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>GitHub: redox-os/orbtk –  The Rust UI-Toolkit.
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust,Rust GUI Overview Platform Documentation Community Activity Most Activity Period Native UI Cross platform Leak 3.5k stars Kind of 2020 No Conclusion Highlights – Cross platform Downsides – Documentation leak and not in activity development. </p>
            </div>
            <footer class="entry-footer"><span title='2022-02-08 12:10:00 +0800 +0800'>February 8, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to GitHub: redox-os/orbtk –  The Rust UI-Toolkit." href="https://notes.0081800.xyz/notes/20220208121018-github_redox_os_orbtk_the_rust_ui_toolkit/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Rust GUI
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust,GUI </p>
            </div>
            <footer class="entry-footer"><span title='2022-02-08 12:10:00 +0800 +0800'>February 8, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Rust GUI" href="https://notes.0081800.xyz/notes/20220208121029-rust_gui/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Why Rust strings seem hard
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust “Why Rust Strings Seem Hard | Brandon’s Website.” Accessed January 17, 2022. https://www.brandons.me/blog/why-rust-strings-seem-hard. </p>
            </div>
            <footer class="entry-footer"><span title='2022-01-17 17:03:00 +0800 +0800'>January 17, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Why Rust strings seem hard" href="https://notes.0081800.xyz/notes/20220117170333-why_rust_strings_seem_hard/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>如何理解 Sync 和 Send?
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust,Thread Safety source: Hexi. “如何理解 Sync 和 Send?” 李晨曦的博客 | Hexi Blog, May 5, 2019. https://hexilee.me/2019/05/05/how-to-understand-sync-and-send-in-rust/. 语义：
实现了 Send 的类型，可以安全地在线程间传递所有权。也就是说， 可以跨线程移动。 实现了 Sync 的类型， 可以安全地在线程间传递不可变借用。也就是说，可以跨线程共享。 </p>
            </div>
            <footer class="entry-footer"><span title='2022-01-17 16:51:00 +0800 +0800'>January 17, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to 如何理解 Sync 和 Send?" href="https://notes.0081800.xyz/notes/20220117165142-%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3_sync_%E5%92%8C_send/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>The Little Book of Rust Macros
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust,Rust Macro,Online Tutorial source: https://danielkeep.github.io/tlborm/book/index.html </p>
            </div>
            <footer class="entry-footer"><span title='2022-01-17 16:47:00 +0800 +0800'>January 17, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to The Little Book of Rust Macros" href="https://notes.0081800.xyz/notes/20220117164736-the_little_book_of_rust_macros/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>A half-hour to learn Rust
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust,Online Tutorial source: fasterthanli.me. “A Half-Hour to Learn Rust.” Accessed January 17, 2022. https://fasterthanli.me/articles/a-half-hour-to-learn-rust. </p>
            </div>
            <footer class="entry-footer"><span title='2022-01-17 16:46:00 +0800 +0800'>January 17, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to A half-hour to learn Rust" href="https://notes.0081800.xyz/notes/20220117164630-a_half_hour_to_learn_rust/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Rust Macro
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust </p>
            </div>
            <footer class="entry-footer"><span title='2022-01-17 16:45:00 +0800 +0800'>January 17, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Rust Macro" href="https://notes.0081800.xyz/notes/20220117164506-rust_macro/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>GitHub: dtolnay/proc-macro-workshop - Learn to write Rust procedural macros
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust,Rust Macro,Learning </p>
            </div>
            <footer class="entry-footer"><span title='2022-01-17 16:44:00 +0800 +0800'>January 17, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to GitHub: dtolnay/proc-macro-workshop - Learn to write Rust procedural macros" href="https://notes.0081800.xyz/notes/20220117164450-github_dtolnay_proc_macro_workshop_learn_to_write_rust_procedural_macros/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>GitHub: pingcap/talent-plan - open source training courses about distributed database and distributed systemes
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust,Distributed Systems,Online Tutorial,Learning source: https://github.com/pingcap/talent-plan </p>
            </div>
            <footer class="entry-footer"><span title='2022-01-17 16:43:00 +0800 +0800'>January 17, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to GitHub: pingcap/talent-plan - open source training courses about distributed database and distributed systemes" href="https://notes.0081800.xyz/notes/20220117164352-github_pingcap_talent_plan_open_source_training_courses_about_distributed_database_and_distributed_systemes/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>GitHub: rust-lang/rustlings – Small exercises to get you used to reading and writing Rust code!
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust,Online Tutorial,Learning source: https://github.com/rust-lang/rustlings </p>
            </div>
            <footer class="entry-footer"><span title='2022-01-17 16:43:00 +0800 +0800'>January 17, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to GitHub: rust-lang/rustlings – Small exercises to get you used to reading and writing Rust code!" href="https://notes.0081800.xyz/notes/20220117164303-github_rust_lang_rustlings_small_exercises_to_get_you_used_to_reading_and_writing_rust_code/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Rust Language Cheat Sheet
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust,Online Tutorial source: https://cheats.rs/ </p>
            </div>
            <footer class="entry-footer"><span title='2022-01-05 19:03:00 +0800 +0800'>January 5, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Rust Language Cheat Sheet" href="https://notes.0081800.xyz/notes/20220105190301-rust_language_cheat_sheet/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Deserializing JSON really fast
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust,优化,High Performance source: https://blog.datalust.co/deserializing-json-really-fast/ </p>
            </div>
            <footer class="entry-footer"><span title='2022-01-04 18:42:00 +0800 +0800'>January 4, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Deserializing JSON really fast" href="https://notes.0081800.xyz/notes/20220104184242-deserializing_json_really_fast/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>SO: What is the difference between iter and into_iter?
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust source: https://stackoverflow.com/a/34745885/2873718 </p>
            </div>
            <footer class="entry-footer"><span title='2022-01-01 08:21:00 +0800 +0800'>January 1, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to SO: What is the difference between iter and into_iter?" href="https://notes.0081800.xyz/notes/20220101082142-so_what_is_the_difference_between_iter_and_into_iter/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>GitHub: Rust Memory Container Cheat-sheet
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust Wrapper Types,Rust source: Rust Memory Container Cheat-sheet </p>
            </div>
            <footer class="entry-footer"><span title='2022-01-01 08:20:00 +0800 +0800'>January 1, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to GitHub: Rust Memory Container Cheat-sheet" href="https://notes.0081800.xyz/notes/20220101082045-github_rust_memory_container_cheat_sheet/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Wrapper Types in Rust: Choosing Your Guarantees
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust,Rust Wrapper Types source: https://manishearth.github.io/blog/2015/05/27/wrapper-types-in-rust-choosing-your-guarantees/ </p>
            </div>
            <footer class="entry-footer"><span title='2022-01-01 08:19:00 +0800 +0800'>January 1, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Wrapper Types in Rust: Choosing Your Guarantees" href="https://notes.0081800.xyz/notes/20220101081950-wrapper_types_in_rust_choosing_your_guarantees/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>GitHub: raft-rs
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust,Raft source: https://github.com/tikv/raft-rs </p>
            </div>
            <footer class="entry-footer"><span title='2022-01-01 08:02:00 +0800 +0800'>January 1, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to GitHub: raft-rs" href="https://notes.0081800.xyz/notes/20220101080223-github_raft_rs/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>actix-web extractors 支持提取任意长度的参数
              </h2>
            </header>
            <div class="entry-content">
              <p>tags: Rust 背景 今天看了一下 actix-web 发现该框架支持基于参数的 Extractor，可以非常方便地解析参数（包括 URI、Query、JSON 和 FormData）。
先来看一个在项目 README.md 中的例子：
use actix_web::{get, web, App, HttpServer, Responder}; #[get(&#34;/{id}/{name}/index.html&#34;)] async fn index(web::Path((id, name)): web::Path&lt;(u32, String)&gt;) -&gt; impl Responder { format!(&#34;Hello {}! id:{}&#34;, name, id) } #[actix_web::main] async fn main() -&gt; std::io::Result&lt;()&gt; { HttpServer::new(|| App::new().service(index)) .bind(&#34;127.0.0.1:8080&#34;)? .run() .await } 初看之下觉得很神奇，但细想通过宏实现应该不是特别困难，然后发现其官网还有不是基于宏的运行时调用：
use actix_web::{web, App, HttpRequest, HttpServer, Responder}; async fn greet(req: HttpRequest) -&gt; impl Responder { let name = req.match_info().get(&#34;name&#34;).unwrap_or(&#34;World&#34;); format!(&#34;Hello {}!...</p>
            </div>
            <footer class="entry-footer"><span title='2021-12-21 17:46:00 +0800 +0800'>December 21, 2021</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to actix-web extractors 支持提取任意长度的参数" href="https://notes.0081800.xyz/articles/20211221174651-actix_web_extractor/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>When Zero Cost Abstractions Aren&#39;t Zero Cost
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust 原文：When Zero Cost Abstractions Aren’t Zero Cost </p>
            </div>
            <footer class="entry-footer"><span title='2021-08-10 15:17:00 +0800 +0800'>August 10, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to When Zero Cost Abstractions Aren&#39;t Zero Cost" href="https://notes.0081800.xyz/notes/20210810151736-when_zero_cost_abstractions_aren_t_zero_cost/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Tokio
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust </p>
            </div>
            <footer class="entry-footer"><span title='2021-08-08 08:31:00 +0800 +0800'>August 8, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Tokio" href="https://notes.0081800.xyz/notes/20210808083146-tokio/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Understanding Rust futures by going way too deep
              </h2>
            </header>
            <div class="entry-content">
              <p>tags: Translate,Rust,Tokio 原文链接：Understanding Rust futures by going way too deep。
译者注：原文大量的引入了有趣的对话，迫于排版问题这里不进行翻译，必要的对话通过引用块来解释。
深入理解 Rust future 用 Rust future！就是这么简单！直到我们发现并非如此。所以我们先探索简单的部分，然后继续探索困难部分而不是等它慢慢靠近我们。
起步 Choo choo here comes the easy part 🚂💨
我们创建一个新的项目：
$ cargo new waytoodeep Created binary (application) `waytoodeep` package 我们需要安装 cargo-edit 如果之前没有安装过的话，接下来就可以直接 cargo add ：
$ cargo install cargo-edit Updating crates.io index Downloaded cargo-edit v0.7.0 Downloaded 1 crate (57.6 KB) in 0.47s Ignored package `cargo-edit v0.7.0` is already installed, use --force to override 因为 cargo-edit 很方便，所以你可能已经安装过它。部分读者会感到困惑是因为像 cargo new, cargo build, cargo test, cargo run 等子命令都内置在 cargo 中， 但是 cargo add 没有。...</p>
            </div>
            <footer class="entry-footer"><span title='2021-07-26 10:57:00 +0800 +0800'>July 26, 2021</span>&nbsp;·&nbsp;44 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Understanding Rust futures by going way too deep" href="https://notes.0081800.xyz/articles/20210726105711-understanding_rust_futures_by_going_way_too_deep/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>C、Rust 和 Swift 的内存模型
              </h2>
            </header>
            <div class="entry-content">
              <p>tags: Rust,Swift,编程语言内存模型 都采用C&#43;&#43;11 内存模型。</p>
            </div>
            <footer class="entry-footer"><span title='2021-07-16 12:02:00 +0800 +0800'>July 16, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to C、Rust 和 Swift 的内存模型" href="https://notes.0081800.xyz/notes/20210716120258-c_rust_%E5%92%8C_swift_%E7%9A%84%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Rust Obscure Words for non-native English speakers
              </h2>
            </header>
            <div class="entry-content">
              <p>tags: Rust,Learning English
unwinding</p>
            </div>
            <footer class="entry-footer"><span title='2020-08-29 08:11:00 +0800 +0800'>August 29, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Rust Obscure Words for non-native English speakers" href="https://notes.0081800.xyz/notes/20200829081145-rust_obscure_words_for_non_native_english_speakers/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Rust Asynchronous Programming
              </h2>
            </header>
            <div class="entry-content">
              <p>tags: Rust Future async fn 将一个代码块转换为一个 Future 对象， Future 对象维护一个状态机 Future 对象必须运行在一个 Executor 上 Executor futures::executor::block_on 阻塞当前线程直到 future 完成
// `block_on` blocks the current thread until the provided future has run to // completion. Other executors provide more complex behavior, like scheduling // multiple futures onto the same thread. use futures::executor::block_on; async fn hello_world() { println!(&#34;hello, world!&#34;); } fn main() { let future = hello_world(); // Nothing is printed block_on(future); // `future` is run and &#34;hello, world!...</p>
            </div>
            <footer class="entry-footer"><span title='2020-08-28 16:08:00 +0800 +0800'>August 28, 2020</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Rust Asynchronous Programming" href="https://notes.0081800.xyz/notes/20200828160809-rust_asynchronous_programming/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Choosing a Rust web framework, 2020 edition
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust source: Choosing a Rust web framework, 2020 edition </p>
            </div>
            <footer class="entry-footer"><span title='2020-07-10 10:12:00 +0800 +0800'>July 10, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Choosing a Rust web framework, 2020 edition" href="https://notes.0081800.xyz/notes/20200710101214-web/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Fearless Concurrency with Rust
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust 原文链接：https://blog.rust-lang.org/2015/04/10/Fearless-Concurrency.html </p>
            </div>
            <footer class="entry-footer"><span title='2020-07-03 10:40:00 +0800 +0800'>July 3, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Fearless Concurrency with Rust" href="https://notes.0081800.xyz/notes/20200703104039-fearless_concurrency_with_rust/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Rust Means Never Having to Close a Socket
              </h2>
            </header>
            <div class="entry-content">
              <p>tags: Translate,Rust,Rust Wrapper Types 原文链接：Rust Means Never Having to Close a Socket
Rust 最酷的特性之一就是它可以自动地帮助你管理资源，同时在仍能保持安全（没有段错误）和高性能。
这是因为 Rust 是一门与众不同地编程语言，要理解我说的可能有点困难，让我来更近一步说明：
Rust 就像带垃圾回收的编程语言，你无需手动释放内存 Rust 不同于其他带垃圾回收的编程语言，你无需1手动关闭或者释放像文件、套接字和锁这样的资源 Rust 达到以上这些特性不附带任何运行时开销（垃圾回收或者引用计数），并且不牺牲安全性。 如果你曾经造成过一个套接字或者文件泄漏，或者使用过一些抽象方法造成了这些资源的泄漏，那么你就会知道这有多重要。
你可能已经期望通过“使用后释放”来避免内存问题，而与此同时你并没有考虑到没有明确地关闭套接字可能出现类似的错误。我在这里告诉你，还有更好地办法。
如果你使用的是带垃圾回收的编程语言，则应密切关注本文提到的资源管理方面的内容。如果你使用的是像 C/C&#43;&#43; 这样底层编程语言，你可能会对安全方面更加感兴趣。
Rust 的许多特性都是从其他语言借鉴而来。Rust 之所以变得有趣是因为它把所有的这些特性放在了一起，并且在编程语言层面实现了更严格地保证。 实际上，这种编程语言层面的保证让这些特性更加实用。
所有权系统（The Ownership System） 让这种保证工作的方式是通过 Rust 的「所有权（ownership）」系统。不管任何时候你创建一个新的对象，都被创建它的「作用域（scope）」所拥有。
让我们通过一个例子来进一步说明：我们定义一个函数，函数拷贝输入文件到临时文件去处理它，然后拷贝输入文件到输出文件。
fn process(from: &amp;Path, to: &amp;Path) -&gt; IoResult&lt;()&gt; { // creates a new tempdir with the specified suffix let tempdir = try!(TempDir::new(&#34;skylight&#34;)); // open the input file let mut from_file = try!...</p>
            </div>
            <footer class="entry-footer"><span title='2020-06-29 18:17:00 +0800 +0800'>June 29, 2020</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Rust Means Never Having to Close a Socket" href="https://notes.0081800.xyz/notes/20200629181735-rust_means_never_having_to_close_a_socket/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Rust Trait Object
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust 动态大小类型（DST）和 Sized 特性 str （非 &amp;str ）就是一个 DST，我们不能在运行时得知 str 的大小。 &amp;str 是一个指针类型，大小是已知的。
DST：拥有额外的元数据存储动态大小的信息。
每一个特性都是一个是个 DST，使用 Trait Object 必须是像 &amp;dyn Trait 和 Box&lt;dyn Trait&gt; （或 Rc&lt;dyn Trait&gt; ）的指针类型。
dyn 关键字 dyn 关键字用于将 Trait Object 指针和普通的结构体指针区分开来。
Sized vs ?Sized Rust 有一个特定的特性叫做 Sized 去判断一个类型的大小是否是编译期可知的，并且自动在编译期为所有已知大小的类型实现， 同时 Rust 隐式的为泛型函数的类型参数加上 Sized 的限制（bound），下面这样的泛型函数：
fn generic&lt;T&gt;(t: T) { // --snip-- } 实际上相当于像下面这样硬编码：
fn generic&lt;T: Sized&gt;(t: T) { // --snip-- } 也可以通过下面特定的语法取消这个限制：
fn geneic&lt;T: ?Sized&gt;(t: &amp;T) { // --snip-- } </p>
            </div>
            <footer class="entry-footer"><span title='2020-03-29 00:00:00 +0800 +0800'>March 29, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Rust Trait Object" href="https://notes.0081800.xyz/notes/20200329204833_rust_trait_object/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Rust Borrow and Lifetimes
              </h2>
            </header>
            <div class="entry-content">
              <p>tags: Rust,Translate,Rust Wrapper Types 原文链接：Rust Borrow and Lifetimes。
Rust 是一门处于往 1.0 活跃开发的新语言（译注：1.0 早已发布，目前最新稳定版本 1.42）。 我必须再写一篇关于我为什么觉得 Rust 牛逼的新博客，但是今天我将关注在它的借用（borrow） 和生命周期（lifetimes）系统，这也是常常让包括我在内的 Rust 新手陷入困境的地方。这篇文章假设 你基本了解 Rust，如果还没推荐你先阅读指南和指针指南。
资源所有权和借用 Rust 通过一个难缠的（sophisticated）借用系统在不用 GC 的情况下达到内存安全。对于任何资源 （栈内存、堆内存、文件句柄等），他们都对应一个唯一的所有者（owner）在需要的情况下处理资源回收。 你可以通过 &amp; 或者 &amp;mut 创建一个新的绑定指向该资源，这被称之为借用或可变借用。编译器确保 所有的所有者（owners）和借用者（borrowers）行为正确。
拷贝和转移（Copy and move） 在我们开始进入借用系统之前，我们需要知道 Rust 如何处理拷贝和转移。这个 StackOverflow 答案非常值得一读。 基本上，在赋值和函数调用上：
如果值是可拷贝的（copyable）（仅涉及原始（primitive）类型，不涉及如内存或文件句柄的资源），编译器默认进行拷贝。 其他情况，编译器转移（moves）所有权（ownership）并使原来的绑定无效。 简而言之，POD（Plan Old Data） =&gt; 拷贝，Non-POD（线性类型（linear types））=&gt; 转移。
以下是一些额外的注释供你参考：
Rust 拷贝像 C。每一个按值（by-value）使用一个值都是字节拷贝（通过 memcpy 浅拷贝），而不是语义上的拷贝或克隆。 如果想要让一个 POD 结构体变成不可拷贝的，你可以使用一个 NoCopy 标记，或者实现 Drop 特性（trait）。 转移之后，所有权就转移到了下一个所有者那。
资源回收 Rust 会在任何资源的所有权消失后立刻释放该资源，就这些，当：...</p>
            </div>
            <footer class="entry-footer"><span title='2020-03-25 00:00:00 +0800 +0800'>March 25, 2020</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Rust Borrow and Lifetimes" href="https://notes.0081800.xyz/articles/20200325182450_rust_borrow_and_lifetimes/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>Rust Wrapper Types
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: Rust </p>
            </div>
            <footer class="entry-footer"><span title='2020-03-25 00:00:00 +0800 +0800'>March 25, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to Rust Wrapper Types" href="https://notes.0081800.xyz/notes/20200325165657_rust_wrapper_types/"></a>
          </article>
       
          <article class="post-entry"> 
            <header class="entry-header">
              <h2>《The Rust Programming Language》读书笔记
              </h2>
            </header>
            <div class="entry-content">
              <p> tags: 读书笔记,Rust
语句和表达式
所有权
引用和借用
结构体
枚举
模式匹配
if let
模块化
错误处理
Traits
生命周期
闭包
迭代器
智能指针
Rust 宏
Rust 并发
函数指针 fn 区分闭包的 Fn 特性，函数指针都实现来三个闭包的特性。
fn do(f: fn(i32) -&gt; i32, arg: i32) -&gt; i32 { f(arg) &#43; f(arg) } </p>
            </div>
            <footer class="entry-footer"><span title='2019-04-09 00:00:00 +0800 +0800'>April 9, 2019</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Gray King</footer>
            <a class="entry-link" aria-label="post link to 《The Rust Programming Language》读书笔记" href="https://notes.0081800.xyz/notes/20200325165411_the_rust_programming_language/"></a>
          </article>
       
     </ul>
    </div>
  </div>


</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://notes.0081800.xyz/">Taking Smart Notes With Org-mode</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
